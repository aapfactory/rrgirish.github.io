---
layout: post
title: Services in SSO (vSphere 5.5)
date: '2014-10-22T21:22:00.001-07:00'
author: Girish Rao
tags:
- vcenter
modified_time: '2014-11-06T03:34:41.394-08:00'
thumbnail: http://lh5.ggpht.com/-cvu3tAPvgOQ/VEiCcFPcEKI/AAAAAAAACik/s1hdLESS4kk/s72-c/image_thumb%25255B2%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-984868599755994151.post-507038279889305716
blogger_orig_url: http://www.virtualtipsntricks.com/2014/10/services-in-sso-vsphere-55.html
---

<div style="text-align: left" dir="ltr" trbidi="on">&nbsp;</div> <p>SSO is actually quite complex in the sense that there are quite a few services running under the umbrella of this SSO service.</p> <div style="text-align: left" dir="ltr" trbidi="on"><br>&nbsp;</div> <h4 style="text-align: left" dir="ltr" trbidi="on">VMware Directory Service</h4> <div style="text-align: left" dir="ltr" trbidi="on">A directory service is a software system that stores, organizes and provides access to information in a directory. In software engineering, a directory is a map between names and values. It allows the lookup of values given a name, similar to a dictionary.<br>This description may sound very much the same as one for a relational database, but there are a number of things that distinguish a traditional directory service from a typical relational database. Of course there are exceptions, but in general:<br> Directory information is read more often than it is written; this makes features related to transactions and rollback less important.<br> Data can be redundant if it helps performance.<br> Directory schemas are defined as object classes, attributes, name bindings and knowledge (namespaces)</div> <div style="text-align: left" dir="ltr" trbidi="on"><br>Active Directory, OpenLDAP, and eDirectory are examples of well-known Directory Services. VMware Directory also has similar functionality to these examples. If you have experience with another LDAP implementation, it will be very valuable to you as you troubleshoot or interact with “vmdir”. </div> <div style="text-align: left" dir="ltr" trbidi="on"><br>The following table documents some information about the service:<br></div> <div style="text-align: left" dir="ltr" trbidi="on"> <table style="width: 400px" cellspacing="0" cellpadding="2" border="1"> <tbody> <tr> <td valign="top" width="185">Ports</td> <td valign="top" width="213">TCP 2012 (Control Interface), TCP 11711 (LDAP), TCP 11712 (LDAPS)</td></tr> <tr> <td valign="top" width="180">Process Name</td> <td valign="top" width="218">vmdird.exe</td></tr> <tr> <td valign="top" width="177">Data Location (Windows)</td> <td valign="top" width="222">C:\ProgramData\VMware\CIS\data\vmdird\data.mdb</td></tr> <tr> <td valign="top" width="169">Installation Location (Windows)</td> <td valign="top" width="229">C:\Program Files\VMware\Infrastructure\VMware\CIS\vmdird</td></tr></tbody></table></div> <div style="text-align: left" dir="ltr" trbidi="on">&nbsp;</div> <div style="text-align: left" dir="ltr" trbidi="on">vmdir has a built-in automatic replication engine. This engine will allow various SSO 5.5 instances to maintain consistent information across various SSO nodes. vmdir uses a Multi-Master Replication topology. Multi-Master Replication is a replication model where entries can be written and updated on any of several master replica copies without requiring communication with other master replicas before the write or update is performed.<br>What this functionality means for SSO 5.5 is that when configuration changes are made on one node, those changes are replicated automatically (every 30 seconds) to every other node in the environment. This is very similar to how Microsoft Active Directory works. <br></div> <h4 style="text-align: left" dir="ltr" trbidi="on">&nbsp;</h4> <h4 style="text-align: left" dir="ltr" trbidi="on">VMware Identity Management Service (idm)</h4> <div style="text-align: left" dir="ltr" trbidi="on">The VMware Identity Management Service is in many ways the heart of the SSO 5.5 system. This service handles incoming authentication requests, and routes them to the appropriate directory or identity source.</div> <div style="text-align: left" dir="ltr" trbidi="on"><br>The following table documents some information about the service:<br></div> <div style="text-align: left" dir="ltr" trbidi="on"> <table style="width: 400px" cellspacing="0" cellpadding="2" border="1"> <tbody> <tr> <td valign="top" width="185">Ports</td> <td valign="top" width="213">TCP 12721</td></tr> <tr> <td valign="top" width="180">Process Name</td> <td valign="top" width="218">VMwareIdentityMgmtService.exe</td></tr> <tr> <td valign="top" width="177">Data Location (Windows)</td> <td valign="top" width="222">C:\ProgramData\VMware\CIS\data\vmware-sso</td></tr> <tr> <td valign="top" width="169">Installation Location (Windows)</td> <td valign="top" width="229">C:\Program Files\VMware\Infrastructure\VMware\CIS\vmware-sso</td></tr></tbody></table></div> <h4 style="text-align: left" dir="ltr" trbidi="on">&nbsp;</h4> <h4 style="text-align: left" dir="ltr" trbidi="on">VMware Secure Token Service (sts)</h4> <div style="text-align: left" dir="ltr" trbidi="on">The Secure Token Service is responsible for issuing security tokens once the user identity is verified. This service runs the Tomcat server which is the closest analog to the original SSO 5.1 configuration. </div> <div style="text-align: left" dir="ltr" trbidi="on"><br>The Admin Service and Lookup Service which were part of SSO 5.1.0 are still present in SSO 5.5 for legacy compatibility. The VMware Secure Token Service owns these two applications, and presents them in the same fashion as SSO 5.1 did.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Admin Service: <a href="https://%3Cfqdn/">https://&lt;FQDN</a>&gt;:7444/sso-adminserver/sdk<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lookup Service: <a href="https://&lt;FQDN&gt;:7444/lookupservice/sdk">https://&lt;FQDN&gt;:7444/lookupservice/sdk</a> <br></div> <div style="text-align: left" dir="ltr" trbidi="on">The following table documents some information about the service:<br></div> <div style="text-align: left" dir="ltr" trbidi="on"> <table style="width: 400px" cellspacing="0" cellpadding="2" border="1"> <tbody> <tr> <td valign="top" width="185">Ports</td> <td valign="top" width="213">TCP 7444</td></tr> <tr> <td valign="top" width="180">Process Name</td> <td valign="top" width="218">wrapper.exe</td></tr> <tr> <td valign="top" width="177">Data Location (Windows)</td> <td valign="top" width="222">C:\ProgramData\VMware\CIS\data\vmware-sso</td></tr> <tr> <td valign="top" width="169">Installation Location (Windows)</td> <td valign="top" width="229">C:\Program Files\VMware\Infrastructure\VMware\CIS\vmware-sso</td></tr></tbody></table></div> <div style="text-align: left" dir="ltr" trbidi="on">&nbsp;</div> <div style="text-align: left" dir="ltr" trbidi="on">The sts service currently supports only the WS Trust token specificiation, which is is a WS-* specification that provides extensions to WS-Security, specifically dealing with the issuing, renewing, and validating of security tokens, as well as with ways to establish, assess the presence of, and broker trust relationships between participants in a secure message exchange.<br></div> <h4 style="text-align: left" dir="ltr" trbidi="on">VMware Certificate Service (vmca)</h4> <div style="text-align: left" dir="ltr" trbidi="on">The VMware Certificate Service is an X.509 compliant certificate authority, which supports issuing and revocation of certificates. <br></div> <div style="text-align: left" dir="ltr" trbidi="on">The following table documents some information about the service:<br></div> <div style="text-align: left" dir="ltr" trbidi="on"> <table style="width: 400px" cellspacing="0" cellpadding="2" border="1"> <tbody> <tr> <td valign="top" width="185">Ports</td> <td valign="top" width="213">TCP 2014</td></tr> <tr> <td valign="top" width="180">Process Name</td> <td valign="top" width="218">vmcad.exe</td></tr> <tr> <td valign="top" width="177">Data Location (Windows)</td> <td valign="top" width="222">C:\ProgramData\VMware\CIS\data\vmca</td></tr> <tr> <td valign="top" width="169">Installation Location (Windows)</td> <td valign="top" width="229">C:\Program Files\VMware\Infrastructure\VMware\CIS\vmcad</td></tr></tbody></table></div> <div style="text-align: left" dir="ltr" trbidi="on">&nbsp;</div> <div style="text-align: left" dir="ltr" trbidi="on">The vmca service requires its own Root certificate. This certificate is generated automatically during the installation of SSO 5.5. The certificate is 2048-bit sha256 self-signed. It will be valid for 10 years from the date of creation.<br><strong></strong><br><strong>vTip: Replacing the root vmca certificate is not supported.</strong><br><strong>vTip: You can view the certificate at C:\ProgramData\VMware\CIS\data\vmca\root.cer</strong><br></div><a href="http://lh5.ggpht.com/-L8xdokn9wKk/VEiCbFBEhqI/AAAAAAAACic/NAPLEYvRH1w/s1600-h/image%25255B4%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto" border="0" alt="image" src="http://lh5.ggpht.com/-cvu3tAPvgOQ/VEiCcFPcEKI/AAAAAAAACik/s1hdLESS4kk/image_thumb%25255B2%25255D.png?imgmax=800" width="379" height="460"></a> <br><strong></strong> <h4>VMware Kdc Service (vmkdc)</h4> <p>The VMware Kdc Service is Kerberos KDC capable of issuing tickets for use by the VMware Certificate Service. <br></p> <p>The following table documents some information about the service:<br></p> <table style="width: 400px" cellspacing="0" cellpadding="2" border="1"> <tbody> <tr> <td valign="top" width="185">Ports</td> <td valign="top" width="213">TCP 88, TCP 2013</td></tr> <tr> <td valign="top" width="180">Process Name</td> <td valign="top" width="218">vmkdcd.exe</td></tr> <tr> <td valign="top" width="177">Data Location (Windows)</td> <td valign="top" width="222">C:\ProgramData\VMware\CIS\data\vmkdcd</td></tr> <tr> <td valign="top" width="169">Installation Location (Windows)</td> <td valign="top" width="229">C:\Program Files\VMware\Infrastructure\VMware\CIS\vmkdcd</td></tr></tbody></table><br> <h4>Starting services</h4>This is the recommended startup order:<br>1. VMware Directory Service<br>2. VMware Kdc Service<br>3. VMware Certificate Service<br>4. VMware Identity Management Service<br>5. VMware Secure Token Service <br><br><a href="http://lh4.ggpht.com/-Nqygwt5l_Gs/VEiCcxc4VqI/AAAAAAAACis/uriZxyIR5U8/s1600-h/image%25255B8%25255D.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; border-bottom-width: 0px; float: none; margin-left: auto; display: block; border-top-width: 0px; margin-right: auto" border="0" alt="image" src="http://lh5.ggpht.com/-mOu87V-I4sU/VEiCdgKe4MI/AAAAAAAACi0/W1xLGtVbU2Q/image_thumb%25255B4%25255D.png?imgmax=800" width="452" height="126"></a>  