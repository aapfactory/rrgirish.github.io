---
layout: post
title: Creating a Database for VCenter in Oracle 12c
date: '2014-09-26T22:21:00.001-07:00'
author: Girish Rao
tags:
- vcenter
modified_time: '2014-10-11T23:53:34.836-07:00'
thumbnail: http://lh6.ggpht.com/-K2cPCq4ilM4/VCjgpU6AaiI/AAAAAAAACaM/ybj99EmGAv8/s72-c/Oracle-1_thumb%25255B1%25255D.jpg?imgmax=800
blogger_id: tag:blogger.com,1999:blog-984868599755994151.post-6206523465966412617
blogger_orig_url: http://www.virtualtipsntricks.com/2014/09/creating-database-for-vcenter-in-oracle.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><h3 dir="ltr" style="text-align: left;" trbidi="on">&nbsp;</h3><h4 dir="ltr" style="text-align: left;" trbidi="on"><b>Container Databases (CDB) and Pluggable Databases (PDB) for oracle 12 C </b></h4><div dir="ltr" style="text-align: left;" trbidi="on">The multitenant option represents one of the biggest architectural changes in the history of the Oracle database. This option introducs the concepts of the Container Database (CDB) and Pluggable Database (PDB). </div><blockquote dir="ltr" style="text-align: left;" trbidi="on">• Container Database (CDB) : On the surface this seems very similar to a conventional Oracle database, as it contains most of the working parts you will be already familiar with (controlfiles, datafiles, undo, tempfiles, redo logs etc.) It also houses the data dictionary for those objects that are owned by the root container and those that are visible to all PDBs.</blockquote><blockquote dir="ltr" style="text-align: left;" trbidi="on">• Pluggable Database (PDB) : Since the CDB contains most of the working parts for the database, the PDB only needs to contain information specific to itself. It does not need to worry about controlfiles, redo logs and undo etc. Instead it is just made up of datafiles and tempfiles to handle it's own objects. This includes it's own data dictionary, containing information about only those objects that are specific to the PDB</blockquote><div dir="ltr" style="text-align: left;" trbidi="on">So can we use a PDB for VC? The answer is yes and the steps below show how to configure this.</div><h5 dir="ltr" style="text-align: left;" trbidi="on"><br /><b>Create and Configure a Container Database (CDB) in Oracle Database 12c</b></h5><div dir="ltr" style="text-align: left;" trbidi="on">The Oracle Universal Installer (OUI) allows you to create a container database (CDB) during the software installation. The "Typical Install Configuration" screen has a checkbox to indicate the database is a container database. You can optionally create a single pluggable database (PDB) in this screen also. </div><div dir="ltr" style="text-align: left;" trbidi="on"><br /></div><a href="http://lh3.ggpht.com/-zQkR0am01Vw/VCjgoJh6n8I/AAAAAAAACaE/qeZjkB1mhPo/s1600-h/Oracle-1%25255B3%25255D.jpg"><img alt="Oracle-1" border="0" src="http://lh6.ggpht.com/-K2cPCq4ilM4/VCjgpU6AaiI/AAAAAAAACaM/ybj99EmGAv8/Oracle-1_thumb%25255B1%25255D.jpg?imgmax=800" height="371" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-1" width="503" /></a>  <br />The advanced configuration options provides the same ability on the "Database Identifiers" screen. <br /><br /><a href="http://lh3.ggpht.com/-s31CxX7G2CM/VCjgqrJIc_I/AAAAAAAACaU/8SoUYA_vOEI/s1600-h/Oracle-2%25255B3%25255D.jpg"><img alt="Oracle-2" border="0" src="http://lh5.ggpht.com/-KJjp8fQBiHI/VCjgsC0cYKI/AAAAAAAACac/wdFsHnymNyg/Oracle-2_thumb%25255B1%25255D.jpg?imgmax=800" height="373" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-2" width="506" /></a>  <br />In both cases the creation of a pluggable database (PDB) is optional, so you can create an empty container database and create the pluggable database later if you wish <br />The Database Configuration Assistant (DBCA) gives similar options to the Oracle Universal Installer (OUI). The "Creation Mode" page allows you to enter the default installation configuration details directly <br /><a href="http://lh6.ggpht.com/-KKjdIWaAk_M/VCjgtMURrCI/AAAAAAAACak/uyeaV4SfCJE/s1600-h/Oracle-3%25255B4%25255D.jpg"><img alt="Oracle-3" border="0" src="http://lh3.ggpht.com/-7LmbDEQhRvM/VCjguIgyrMI/AAAAAAAACas/GiduMDtZ5gY/Oracle-3_thumb%25255B2%25255D.jpg?imgmax=800" height="381" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-3" width="517" /></a> <br /><br />If you chose the "Advanced Mode" option, you can create a CDB and multiple PBDs in one go.&nbsp; <br /><br />&nbsp;<a href="http://lh6.ggpht.com/-Nc9xFayzmqA/VCjgvbLIdOI/AAAAAAAACa0/sD7aXG2BSWE/s1600-h/Oracle-4%25255B3%25255D.jpg"><img alt="Oracle-4" border="0" src="http://lh4.ggpht.com/-tdRiNhHUqx8/VCjgxJnbBSI/AAAAAAAACa8/KoX0-q4CA-Y/Oracle-4_thumb%25255B1%25255D.jpg?imgmax=800" height="392" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-4" width="537" /></a> <br /><h5>Create and Configure a Pluggable Database (PDB) in Oracle Database 12c</h5>The DBCA includes a new option on the opening "Database Operation" screen that allows you to manage the pluggable databases of an existing container database. Select the "Manage Pluggable Databases" option and click the "Next" button. <br /><br /><br /><img alt="Oracle-5" border="0" src="http://lh6.ggpht.com/-tpUbl87NRBM/VCjgz3felxI/AAAAAAAACbM/yqYa8eTCO1U/Oracle-5_thumb%25255B1%25255D.jpg?imgmax=800" height="405" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-5" width="549" /><br /><br /><a href="http://lh4.ggpht.com/-9waPZG8FJiU/VCjg1d4qMfI/AAAAAAAACbU/z2n2bqAuFhw/s1600-h/Oracle-6%25255B3%25255D.jpg"><img alt="Oracle-6" border="0" src="http://lh5.ggpht.com/-dDxmm8VU0oI/VCjg22UB5iI/AAAAAAAACbc/BZkW_vIFspQ/Oracle-6_thumb%25255B1%25255D.jpg?imgmax=800" height="418" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-6" width="567" /></a> <br />On the "Manage Pluggable Databases" screen shown previously, select the "Create a Pluggable Database" option and click the "Next" button. On the resulting screen, select the container database to house the new pluggable database and click the "Next" button.  <br /><a href="http://lh3.ggpht.com/-Gv0ETqsAzu0/VCjg4QSBVNI/AAAAAAAACbk/1iIHX6oWT48/s1600-h/Oracle-7%25255B4%25255D.jpg"><img alt="Oracle-7" border="0" src="http://lh6.ggpht.com/-HF-nBDob0IU/VCjg5vSrGkI/AAAAAAAACbs/YaOHqUtrxwM/Oracle-7_thumb%25255B2%25255D.jpg?imgmax=800" height="423" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-7" width="570" /></a> <br /><br />Select the "Create a new Pluggable Database" option and click the "Next" button. If you were plugging in a previously unplugged database, you would select the PDB Archive or PDB File Set options to match the format of the files containing the unplugged PDB. <br /><a href="http://lh5.ggpht.com/-xiUTiwrRGoE/VCjg6n8G28I/AAAAAAAACb0/CvnYnUE6wFQ/s1600-h/Oracle-8%25255B4%25255D.jpg"><img alt="Oracle-8" border="0" src="http://lh4.ggpht.com/-TBp85nymQMc/VCjg73qA9BI/AAAAAAAACb8/8OQftH6OLN4/Oracle-8_thumb%25255B2%25255D.jpg?imgmax=800" height="426" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-8" width="574" /></a> <br /><br />Enter the pluggable database name, database location and admin credentials, then click the "Next" button <br /><a href="http://lh3.ggpht.com/-6V92UmwFlEQ/VCjg9nUQSqI/AAAAAAAACcE/Yl32pPTd8KQ/s1600-h/Oracle-9%25255B3%25255D.jpg"><img alt="Oracle-9" border="0" src="http://lh3.ggpht.com/-Aclwmgq3HiE/VCjhAanBABI/AAAAAAAACcM/DhUnQxYMDes/Oracle-9_thumb%25255B1%25255D.jpg?imgmax=800" height="424" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-9" width="575" /></a> <br /><br />If you are happy with the summary information, click the "Finish" button <br /><a href="http://lh3.ggpht.com/-71dLhcEPogw/VCjhBTstvrI/AAAAAAAACcU/j1zG-g66pIA/s1600-h/Oracle-10%25255B3%25255D.jpg"><img alt="Oracle-10" border="0" src="http://lh5.ggpht.com/-5_JKCkN-o2s/VCjhCTVX3fI/AAAAAAAACcc/b7qGZCZotMo/Oracle-10_thumb%25255B1%25255D.jpg?imgmax=800" height="421" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-10" width="571" /></a> <br /><br />Wait while the pluggable database is created. Once complete, click the "OK" button on the message dialog and the "Close" button on the main screen. <br /><a href="http://lh4.ggpht.com/-HF8zSGIK3IQ/VCjhDXWqDGI/AAAAAAAACck/a1ricYpU-L0/s1600-h/Oracle-11%25255B3%25255D.jpg"><img alt="Oracle-11" border="0" src="http://lh4.ggpht.com/-U_Hrzq0XJPQ/VCjhEU0quiI/AAAAAAAACcs/NvlFjFp6yhE/Oracle-11_thumb%25255B1%25255D.jpg?imgmax=800" height="419" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-11" width="568" /></a> <br /><br />The new pluggable database has been created as a clone of the seed database. <br /><h6><b></b>&nbsp;</h6>If you want to use a PDB using the DBCA, on the "Manage Pluggable Databases" screen shown previously, select the "Create a Pluggable Database" option and click the "Next" button. On the resulting screen, select the container database to house the new pluggable database and click the "Next" button <br /><a href="http://lh6.ggpht.com/-8zKmOpbVL1k/VCjhFRScXxI/AAAAAAAACc0/ArthbgCRDtw/s1600-h/Oracle-16%25255B3%25255D.jpg"><img alt="Oracle-16" border="0" src="http://lh5.ggpht.com/-j7rJD_cCMyA/VCjhGvc-BPI/AAAAAAAACc8/z4snhPNWG1Y/Oracle-16_thumb%25255B1%25255D.jpg?imgmax=800" height="417" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-16" width="565" /></a> <br /><br />Select the "Create Pluggable Database From PDB Archive" or "Create Pluggable Database using PDB File Set" option and enter the location of the required files. You can browse for the files using the "Browse" button. <br /><br /><a href="http://lh4.ggpht.com/--ICdu8IjWEs/VCjhHjpJ3jI/AAAAAAAACdE/xDnTlENptGg/s1600-h/Oracle-17%25255B4%25255D.jpg"><img alt="Oracle-17" border="0" src="http://lh5.ggpht.com/-BFqMbZAx4AI/VCjhI12Za1I/AAAAAAAACdM/beDCHp23Fxc/Oracle-17_thumb%25255B2%25255D.jpg?imgmax=800" height="422" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-17" width="569" /></a> <br /><br />Enter the pluggable database name, database location and admin credentials, then click the "Next" button <br /><a href="http://lh4.ggpht.com/-ZRdo8SLdLAs/VCjhJ0aEFGI/AAAAAAAACdU/YXnHVuv_ybc/s1600-h/Oracle-18%25255B3%25255D.jpg"><img alt="Oracle-18" border="0" src="http://lh5.ggpht.com/-8mfTmozTzcg/VCjhK0aJ6RI/AAAAAAAACdc/TE18VxAafeo/Oracle-18_thumb%25255B1%25255D.jpg?imgmax=800" height="414" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-18" width="561" /></a> <br /><br />If you are happy with the summary information, click the "Finish" button. <br /><a href="http://lh4.ggpht.com/-lo9p4Qw9M0Q/VCjhMdWGmKI/AAAAAAAACdk/WJrjpK9yNa0/s1600-h/Oracle-19%25255B3%25255D.jpg"><img alt="Oracle-19" border="0" src="http://lh5.ggpht.com/-3LOz_d3nhsg/VCjhNm26ekI/AAAAAAAACds/sg9asVnriWg/Oracle-19_thumb%25255B1%25255D.jpg?imgmax=800" height="417" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-19" width="565" /></a> <br /><br />Wait while the pluggable database is created. Once complete, click the "OK" button on the message dialog and the "Close" button on the main screen. <br /><a href="http://lh3.ggpht.com/-etZnis4w0M0/VCjhOn9kEbI/AAAAAAAACd0/Ht3PgQqCaxs/s1600-h/Oracle-20%25255B4%25255D.jpg"><img alt="Oracle-20" border="0" src="http://lh5.ggpht.com/-ftbdHx-leC4/VCjhPq5mMAI/AAAAAAAACd8/ax-Iw6ARo7k/Oracle-20_thumb%25255B2%25255D.jpg?imgmax=800" height="417" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline;" title="Oracle-20" width="562" /></a> <br /><br />The pluggable database has been plugged into the container database. <br /><br /><h4>Steps to configure VC/VCVA using oracle 12c pluggable database.</h4>Once you are done with container DB and pluggable DB, create schema and user for virtual center server. The steps are below. <br />You can create schema using sql developer/Enterprise Manger/cmd line. <br />Enterprise Manger URL: <a href="https://wiki.eng.vmware.com/">https://</a>&lt;oracleserver IP&gt;:5500/em (You can use enterprise manager tool which is inbuit with database, you can perform the dba tasks using this tool) <br />I will use SQL developer to demonstrate the steps: <br />Go to Start--&gt;Program Files--&gt;click on SQL developer (It may ask for JRE path, please provide the same). <br />Click on File--&gt;New Connection select Database connection and click on ok <br /><a href="http://lh5.ggpht.com/-UhWBF_COmhU/VCjhQ0Y95cI/AAAAAAAACeE/MKlIK7S3jSo/s1600-h/800px-Oracle-31%25255B3%25255D.jpg"><img alt="800px-Oracle-31" border="0" src="http://lh3.ggpht.com/-fcaRcZyvY1E/VCjhST_B80I/AAAAAAAACeM/58wZz5ewhM4/800px-Oracle-31_thumb%25255B1%25255D.jpg?imgmax=800" height="325" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="800px-Oracle-31" width="542" /></a> <br /><br /><b>Provide the connection details</b> <br />Connection Name:&lt;vcdb&gt;(up to you) <br />Username:sys <br />Password:” provide sys password” <br />Select Role:sysdba <br />Connection type :Basic <br />Hostname: &lt;oracle server IP&gt; <br />Port:Default port no &lt;1521&gt; <br />Service name: &lt;database name&gt;(In my case database name is as “vcdb”) <br /><br /><a href="http://lh5.ggpht.com/-G8uolUsW_gw/VCjhT64BNZI/AAAAAAAACeU/OPnnilOYZXo/s1600-h/800px-Oracle-32%25255B3%25255D.png"><img alt="800px-Oracle-32" border="0" src="http://lh5.ggpht.com/-xJ5_1EO61YI/VCjhVagvjVI/AAAAAAAACec/Se5gCAv_Bk0/800px-Oracle-32_thumb%25255B1%25255D.png?imgmax=800" height="326" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="800px-Oracle-32" width="545" /></a> <br /><h5><b>Open the worksheet and execute the below commands.</b></h5>ALTER SESSION SET CONTAINER = PDB;(here PDB is pluggable DB)<br />CREATE SMALLFILE TABLESPACE vcdb DATAFILE<br />'C:\app\oracle\oradata\vcdb\PDB\vcdb'SIZE 1G AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED LOGGING EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;<br />CREATE USER vcdb2 PROFILE DEFAULT IDENTIFIED BY ca$hc0w DEFAULT TABLESPACE vcdb ACCOUNT UNLOCK CONTAINER = CURRENT;<br />grant connect to vcdb;<br />grant resource to vcdb;<br />grant create view to vcdb;<br />grant create sequence to vcdb;<br />grant create table to vcdb;<br />grant create materialized view to vcdb;<br />grant unlimited tablespace to vcdb;<br />grant execute on dbms_lock to vcdb;<br />grant execute on dbms_job to vcdb;<br />grant select on dba_tablespaces to vcdb;<br />grant select on dba_temp_files to vcdb;<br />grant select on dba_data_files to vcdb <br /><br /><h5><b>For Windows virtual center serve</b>r:</h5>Go to that machine where you want to install virtual center server and Install oracle 12 client on the machine <br /><b>Create a System DSN Entry </b><br />1. Navigate to Data Sources (ODBC) (Run-&gt;obdbad32)<br />2. In the ODBC Data Source Administrator dialog, click on the "System DSN" tab <br /><a href="http://lh5.ggpht.com/-7jWDHKiPq_k/VCjhWJugRbI/AAAAAAAACek/V_6ta_KXxLI/s1600-h/Oracle-35%25255B5%25255D.png"><img alt="Oracle-35" border="0" src="http://lh5.ggpht.com/-JDeAJ61Qnv0/VCjhXbfnIoI/AAAAAAAACes/ryoCGCCKYX4/Oracle-35_thumb%25255B3%25255D.png?imgmax=800" height="262" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-35" width="314" /></a>&nbsp; <br />3. Click on the "Add..." button to add a new System DSN entry <br />4.In the "Create New Data Source" dialog, select "Oracle in OraDB12Home1" and click "Finish" <br /><br />5. In the "oracle driver Driver" dialog, enter a "Data source name" <br />Datasource Name:&lt;vcdb&gt;(whatever you want)<br />Description:&lt;” Info”&gt;<br />TNS Service Name:&lt;oracleserver IP:/plugguble DB&gt; (In my case “10.112.239.216:/pdb” here pdb is pluggable DB this is changed in oracle 12c)<br />User ID:&lt;vcdb&gt;whatever you have created (in my case “vcdb”)<br />Password:&lt;Password for user&gt; <br /><a href="http://lh4.ggpht.com/-hyGCJceiZhY/VCjhYlDBJXI/AAAAAAAACe0/FFv8DApJnnM/s1600-h/Oracle-37%25255B3%25255D.png"><img alt="Oracle-37" border="0" src="http://lh5.ggpht.com/-oCW3YD2jpLc/VCjhZzddNBI/AAAAAAAACe8/fsOxMnEbfu4/Oracle-37_thumb%25255B1%25255D.png?imgmax=800" height="361" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="Oracle-37" width="474" /></a>  <br />6. From the Data Source tab, enter the "User ID", and click "Test Connection". <br />7. Provide password and and test the connection. If everything is setup correctly, you should see "Connection successfully" <br /><i>Once it is configured, you can proceed with VC installation using oracle 12c database.</i> <br /><h5><i><b>For VCVA:</b></i></h5>1. Deploy VCVA<br />2.Open the virtual appliance management interface (VAMI)<br />3.Accept the EULA and cancel vcva configuration<br />4. Re login VAMI go to database provide the database details <br />Database type: oracle<br />Server:&lt;oracle server IP&gt;(in my case 10.112.239.216)<br />Port:&lt;default Port&gt;(1521)<br />Login:&lt;vcdb&gt;<br />Password:&lt;ca$..&gt; <br /><a href="http://lh4.ggpht.com/-_Xvrq2qfLIE/VCjha7TcXeI/AAAAAAAACfE/RMuKh6zmLBg/s1600-h/800px-Oracle-39%25255B3%25255D.png"><img alt="800px-Oracle-39" border="0" src="http://lh4.ggpht.com/-ozgW9_ld6Kk/VCjhcLS3RqI/AAAAAAAACfM/bx7UJrqbg10/800px-Oracle-39_thumb%25255B1%25255D.png?imgmax=800" height="380" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="800px-Oracle-39" width="515" /></a> <br /><br />If everything is setup correctly, test the setting and save the setting.Go to Services tab and start the virtual center service <br />Now your VC is configured to use Oracle 12c!. </div>