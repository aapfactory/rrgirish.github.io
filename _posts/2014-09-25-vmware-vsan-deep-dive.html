---
layout: post
title: 'VMware VSAN: A Deep Dive'
date: '2014-09-25T01:49:00.001-07:00'
author: Girish Rao
tags:
- misc
- VSAN
modified_time: '2014-10-11T23:55:06.914-07:00'
thumbnail: http://lh4.ggpht.com/-OlDjnGUWtnw/VCPXF2lVpnI/AAAAAAAACZ0/qV6DWF86tOE/s72-c/image_thumb%25255B2%25255D.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-984868599755994151.post-6237682756842969275
blogger_orig_url: http://www.virtualtipsntricks.com/2014/09/vmware-vsan-deep-dive.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><br />With VMware’s vision of having a Software-Defined-Data-Center, the compute, networking and storage resources need to be virtualized and handled in a better way. When talking about Software-Defined Storage, all those heterogeneous storage resources are abstracted into logical pools, consumed and managed via policies set at the datacenter level.<br />Why the focus on storage?<br />Two common concerns that all customers have: storage is costly – in fact based on informal data, storage accounts for 60-70% of the overall infrastructure costs. Part of the reason is the complexity in mapping multiple tiers of applications to only a few tiers of storage. This results in gross over provisioning and under-utilization of storage resources to the applications running on them, which dramatically adds to the cost. In addition storage is complex to manage. While customers can tailor the storage to match the application’s needs, this requires manual management of SLA’s. Compound that with the rapid growth of data and VM’s,it makes data management at scale extremely challenging.  <br />Enter VSAN:  <br /><div align="right"><a href="http://lh4.ggpht.com/-U8LB8XdTlI0/VCPXERO3ceI/AAAAAAAACZs/FtaiurI3i2o/s1600-h/image%25255B4%25255D.png"><img alt="image" border="0" src="http://lh4.ggpht.com/-OlDjnGUWtnw/VCPXF2lVpnI/AAAAAAAACZ0/qV6DWF86tOE/image_thumb%25255B2%25255D.png?imgmax=800" height="308" style="border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: block; float: none; margin-left: auto; margin-right: auto;" title="image" width="309" /></a> </div><div align="left">VSAN is a Software Defined Storage solution fully integrated with VMware vSphere. It is an Object-Based storage system that aggregates local HDDs and SSDs.It has automated policy based storage management for VMs.  </div><h4>&nbsp;</h4><h4>Requirements for VSAN</h4><ol><li>At least 3 x ESXi hosts running version 5.5 update 1 &amp; above</li><li>1 x vCenter server running version 5.5 update 1 &amp; above</li><li>Minimum 6GB of Memory required on each ESXi Host</li><li>1Gb or 10Gb Network on each host </li><li>Vmkernel Virtual Networking Configured on the hosts.</li></ol>Want to know which hardware is supported? Head over to the HCL located at <a href="http://www.vmware.com/resources/compatibility/search.php?deviceCategory=vsan">http://www.vmware.com/resources/compatibility/search.php?deviceCategory=vsan</a><u></u><br /><h4>Disk Groups</h4>Disk groups may be considered as a container in which a relationship between SSDs and magnetic disks are formed. When a virtual machine is created, it is placed on magnetic disks. However its I/O is accelerated through a SSD. The SSD acts as a read cache and write buffer for that VM’s I/O. The SSD. There can be a maximum of 7 Disks per Disk Group. There can be 1 SSD per Disk Disk Group and 5 Disk Groups per ESXi host.  <br />&nbsp; <br /><h4>DEFINING VM REQUIREMENTS</h4>When the Virtual SAN cluster is created, the shared Virtual SAN datastore—which has a set of capabilities that are surfaced up to vCenter is also created. When a vSphere administrator begins to design a virtual machine, that design is influenced by the application it will be hosting. This application might potentially have many sets of requirements, including storage requirements.  <br />The vSphere administrator uses a virtual machine storage policy to specify and contain the application’s storage requirements in the form of storage capabilities that will be attached to the virtual machine hosting the application; the specific storage requirements will be based on capabilities surfaced by the storage system.  <br />In effect, the storage system provides the capabilities, and virtual machines consume them via requirements placed in the virtual machine storage policy. Virtual SAN uses the concept of distributed RAID, by which a vSphere cluster can contend with the failure of a vSphere host, or of a component within a host—for example, magnetic disks, flash-based devices, and network interfaces—and continue to provide complete functionality for all virtual machines. Availability is defined on a per–virtual machine basis through the use of virtual machine storage policies.  <br />vSphere administrators can specify the number of host component failures that a virtual machine can tolerate within the Virtual SAN cluster. If a vSphere administrator sets zero as the number of failures to tolerate in the virtual machine storage policy, one host or disk failure can impact the availability of the virtual machine.  <br />Using virtual machine storage policies along with Virtual SAN distributed RAID architecture, virtual machines and copies of their contents are distributed across multiple vSphere hosts in the cluster. In this case, it is not necessary to migrate data from a failed node to a surviving host in the cluster in the event of a failure.  <br /><h4>&nbsp;</h4><h4>Limits</h4><ul><li>Number of Nodes Supported: 32</li><li>Max Number of Components per Host : 3000</li><li>Max Number of Components per Object : 64</li><li>Max Size of a Single Object : 256GB</li><li>Max number of disks per disk group : 7 MDs and 1 SSD</li><li>Max number of disk groups per host : 5</li><li>Max number of VMs per host : 100</li></ul><br /><br /><br /><br /><br /><br /><br /><br /><br /></div>